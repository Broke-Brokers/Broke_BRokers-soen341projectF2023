{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{collection,onSnapshot,updateDoc,doc}from\"firebase/firestore\";import{db}from'../../firebase_configuration';import'./Offers_table.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Offers_table=()=>{const[clients,setClients]=useState([]);// Renamed and fixed variable name\nconst[brokers,setBrokers]=useState([]);const[offers,setOffers]=useState([]);const[records,setRecords]=useState([]);const[offerStatus,setOfferStatus]=useState(\"\");const brokerCollectionRef=collection(db,'Broker');const ClientCollectionRef=collection(db,'Client');const offersCollectionRef=collection(db,\"Offers\");let brokeremail=\"isa@gmail.com\";useEffect(()=>{const getbrokers=async()=>{//App component will run once when it loads\nonSnapshot(brokerCollectionRef,snapshot=>{//snapshot.docs.maps returns all documents in our firebase\n// doc.data return the data of each document (Field & variables associated with data)\nsetBrokers(snapshot.docs.map(doc=>doc.data()));});};const getClients=async()=>{onSnapshot(ClientCollectionRef,snapshot=>{setClients(snapshot.docs.map(doc=>doc.data()));});};const getOffers=async()=>{onSnapshot(offersCollectionRef,snapshot=>{setOffers(snapshot.docs.map(doc=>doc.data()));});};getbrokers();getClients();getOffers();},[]);const answerSelect=async event=>{const[offerID,offerStatus]=event.target.value.split('|');const updateData=doc(db,\"Offers\",offerID);await updateDoc(updateData,{OfferStatus:offerStatus});};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Offer sent\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Client Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Offer Price ($)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Offer Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:offers.filter(offer=>offer.BrokerID_transmitter===brokeremail).map(option=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:option.ClientName}),/*#__PURE__*/_jsx(\"td\",{children:option.Price}),/*#__PURE__*/_jsxs(\"td\",{children:[option.OfferStatus,\" \"]})]},option.ClientName))})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Offer received \"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Client Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Offer Price ($)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Answer\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:offers.filter(offer=>offer.BrokerID_receiver===brokeremail).map(option=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:option.ClientName}),/*#__PURE__*/_jsx(\"td\",{children:option.Price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{className:\"selection\",onChange:answerSelect,children:[/*#__PURE__*/_jsx(\"option\",{defaultValue:\"Pending\",children:\" Pending \"}),/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(option.ClientName,\"|Accepted\"),children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(option.ClientName,\"|Refused\"),children:\"Refused\"})]})})]},option.ClientName))})]})]});};export default Offers_table;","map":{"version":3,"names":["React","useState","useEffect","collection","onSnapshot","updateDoc","doc","db","jsx","_jsx","jsxs","_jsxs","Offers_table","clients","setClients","brokers","setBrokers","offers","setOffers","records","setRecords","offerStatus","setOfferStatus","brokerCollectionRef","ClientCollectionRef","offersCollectionRef","brokeremail","getbrokers","snapshot","docs","map","data","getClients","getOffers","answerSelect","event","offerID","target","value","split","updateData","OfferStatus","className","children","filter","offer","BrokerID_transmitter","option","ClientName","Price","BrokerID_receiver","onChange","defaultValue","concat"],"sources":["C:/Users/eliann/SOEN341_project/Broke_BRokers-soen341projectF2023/src/components/Offers/Offers_table.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { collection, onSnapshot, updateDoc, doc} from \"firebase/firestore\";\r\n\r\nimport {db} from '../../firebase_configuration'\r\nimport './Offers_table.css'\r\n\r\nconst Offers_table = () => {\r\n    const [clients, setClients] = useState([]); // Renamed and fixed variable name\r\n    const [brokers, setBrokers] = useState ([]);\r\n    const [offers, setOffers] = useState([]);\r\n    const [records, setRecords] = useState([]);\r\n   const [offerStatus, setOfferStatus] = useState(\"\");\r\n    const brokerCollectionRef= collection(db,'Broker');\r\n    const ClientCollectionRef = collection (db,'Client');\r\n   const offersCollectionRef = collection(db, \"Offers\");\r\n   let brokeremail = \"isa@gmail.com\";\r\n\r\n    useEffect(() => {\r\n       \r\n        const getbrokers = async ()=>{\r\n       //App component will run once when it loads\r\n       onSnapshot(brokerCollectionRef, (snapshot)=> {\r\n        //snapshot.docs.maps returns all documents in our firebase\r\n        // doc.data return the data of each document (Field & variables associated with data)\r\n        setBrokers(snapshot.docs.map(doc=> doc.data()))\r\n       });\r\n    };\r\n\r\n\r\n    const getClients = async ()=>{\r\n        onSnapshot(ClientCollectionRef,(snapshot)=>{\r\n            setClients(snapshot.docs.map(doc=>doc.data()))\r\n        });\r\n\r\n    };\r\n\r\n    const getOffers = async ()=>{\r\n        onSnapshot(offersCollectionRef,(snapshot)=>{\r\n            setOffers(snapshot.docs.map(doc=>doc.data()))\r\n        });\r\n\r\n    };\r\n\r\n    getbrokers();\r\n    getClients();\r\n    getOffers();\r\n        \r\n    }, [])\r\n\r\n\r\n\r\n\r\n\r\nconst answerSelect=async (event)=>{\r\n\r\nconst [offerID, offerStatus] = event.target.value.split('|');\r\n    const updateData = doc (db,\"Offers\",offerID)\r\n\r\n    await updateDoc(updateData,{\r\n        OfferStatus: offerStatus\r\n    });\r\n  }\r\n\r\n\r\n    return (\r\n        \r\n        <div className=\"app-container\">\r\n            <h1>Offer sent</h1>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Client Name</th>\r\n                        <th>Offer Price ($)</th>\r\n                        <th>Offer Status</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {offers.filter(offer=> offer.BrokerID_transmitter === brokeremail).map((option) => (\r\n                        <tr key={option.ClientName}>\r\n                            <td>{option.ClientName}</td> \r\n                            <td>{option.Price}</td> \r\n                            <td>{option.OfferStatus} </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            \r\n            \r\n            <h1>Offer received </h1>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Client Name</th>\r\n                        <th>Offer Price ($)</th>\r\n                        <th>Answer</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {offers.filter(offer=> offer.BrokerID_receiver === brokeremail).map((option) => (\r\n                        <tr key={option.ClientName}>\r\n                            <td>{option.ClientName}</td> \r\n                            <td>{option.Price}</td> \r\n                            <td>\r\n                                <select className=\"selection\" onChange={answerSelect}>\r\n                                    <option defaultValue=\"Pending\"> Pending </option>\r\n                                    <option value = {`${option.ClientName}|Accepted`}>Accepted</option>\r\n                                    <option value = {`${option.ClientName}|Refused`}>Refused</option>\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Offers_table;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}