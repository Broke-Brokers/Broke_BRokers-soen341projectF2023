{"ast":null,"code":"import React from'react';import{useState,useEffect}from\"react\";import{db}from'../../firebase_configuration.js';import{collection,doc,getDocs,addDoc,updateDoc,onSnapshot}from\"firebase/firestore\";import'./OfferForm.css';//import { option } from 'yargs';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OfferForm(){let brokerid=1;const[Clients,setClients]=useState([]);const[Offers,setOffers]=useState([]);const[BuyerRenter_Client,setBuyerRenter_Client]=useState([]);const ClientCollectionRef=collection(db,\"Client\");const OffersCollectionRef=collection(db,\"Offers\");const BuyerRenterCollectionRef=collection(db,\"Buyer_Renter\");const[records,setRecords]=useState([]);const[getBrokerID_receiver,setBrokerID_receiver]=useState(0);const[getBrokerID_transmitter,setBrokerID_transmitter]=useState(0);const[getClientID,setClientID]=useState(0);const[getOfferID,setOfferID]=useState(\"\");const[getPrice,setPrice]=useState(\"\");useEffect(()=>{//App component will run once when it loads\nconst getClients=async()=>{onSnapshot(ClientCollectionRef,snapshot=>{//snapshot.docs.maps returns all documents in our firebase\n// doc.data return the data of each document (Field & variables associated with data)\nsetClients(snapshot.docs.map(doc=>doc.data()));setRecords(snapshot.docs.map(doc=>doc.data()));});};const getOffers=async()=>{onSnapshot(OffersCollectionRef,snapshot=>{//snapshot.docs.maps returns all documents in our firebase\n// doc.data return the data of each document (Field & variables associated with data)\nsetOffers(snapshot.docs.map(doc=>doc.data()));setRecords(snapshot.docs.map(doc=>doc.data()));});};const getBuyerRenter=async()=>{onSnapshot(BuyerRenterCollectionRef,snapshot=>{//snapshot.docs.maps returns all documents in our firebase\n// doc.data return the data of each document (Field & variables associated with data)\nsetBuyerRenter_Client(snapshot.docs.map(doc=>doc.data()));setRecords(snapshot.docs.map(doc=>doc.data()));});};getClients();getOffers();getBuyerRenter();},[]);/*\r\nconst FilterClient(client)=>{\r\nsetRecords(Clients.filter((c)=>\r\n{if(c.BrokerID && brokerid)\r\n  return c.ClientName}\r\n))\r\n\r\n\r\n\r\n}*/const createOffers=async()=>{const newOfferDocRef=doc(OffersCollectionRef);setOfferID(newOfferDocRef.id);await addDoc(OffersCollectionRef,{BrokerID_receiver:getBrokerID_receiver,BrokerID_transmitter:getBrokerID_transmitter,ClientID:getClientID,OfferID:getOfferID,OfferStatus:\"\",Price:getPrice});};const ClientSelect=event=>{setClientID(event.target.value);};return/*#__PURE__*/_jsx(\"div\",{className:\"bodyoffer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"containtoffer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leftPart\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightpart\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"selection\",onChange:ClientSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select a client \"}),Clients.filter(client=>client.BrokerID===brokerid).map(option=>/*#__PURE__*/_jsxs(\"option\",{value:option.ClientID,children:[option.ClientName,\" \"]}))]}),/*#__PURE__*/_jsxs(\"label\",{className:\"labelUserEmail\",children:[\"Your email \",/*#__PURE__*/_jsx(\"em\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"user_email\",type:\"email\",placeholder:\"Email\",onChange:event=>{setBrokerID_transmitter(event.target.value);},required:true}),/*#__PURE__*/_jsxs(\"label\",{className:\"labelUserEmail\",children:[\"Other Broker email \",/*#__PURE__*/_jsx(\"em\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"otherEmail\",type:\"email\",placeholder:\"Other Broker email\",name:\"user_email\",onChange:event=>{setBrokerID_receiver(event.target.value);},required:true}),/*#__PURE__*/_jsxs(\"label\",{className:\"labelPrice\",children:[\"Price \",/*#__PURE__*/_jsx(\"em\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"inputPrice\",type:\"price\",placeholder:\"Price\",name:\"user_email\",onChange:event=>{setPrice(event.target.value);},required:true}),/*#__PURE__*/_jsxs(\"label\",{className:\"labelComment\",children:[\"Comment \",/*#__PURE__*/_jsx(\"em\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textareaComment\",name:\"message\",required:\"\",rows:\"4\"}),/*#__PURE__*/_jsx(\"button\",{className:\"SubmitButtonBroker\",onClick:createOffers,children:\"submit\"})]})]})});}export default OfferForm;","map":{"version":3,"names":["React","useState","useEffect","db","collection","doc","getDocs","addDoc","updateDoc","onSnapshot","jsx","_jsx","jsxs","_jsxs","OfferForm","brokerid","Clients","setClients","Offers","setOffers","BuyerRenter_Client","setBuyerRenter_Client","ClientCollectionRef","OffersCollectionRef","BuyerRenterCollectionRef","records","setRecords","getBrokerID_receiver","setBrokerID_receiver","getBrokerID_transmitter","setBrokerID_transmitter","getClientID","setClientID","getOfferID","setOfferID","getPrice","setPrice","getClients","snapshot","docs","map","data","getOffers","getBuyerRenter","createOffers","newOfferDocRef","id","BrokerID_receiver","BrokerID_transmitter","ClientID","OfferID","OfferStatus","Price","ClientSelect","event","target","value","className","children","onChange","filter","client","BrokerID","option","ClientName","type","placeholder","required","name","rows","onClick"],"sources":["C:/Users/eliann/SOEN341_project/Broke_BRokers-soen341projectF2023/src/components/forms/offer_form.jsx"],"sourcesContent":["import React from 'react'\r\nimport {useState, useEffect} from \"react\";\r\nimport {db} from '../../firebase_configuration.js'\r\nimport { collection, doc, getDocs, addDoc, updateDoc, onSnapshot} from \"firebase/firestore\";\r\nimport './OfferForm.css'\r\n//import { option } from 'yargs';\r\nfunction OfferForm() {\r\n  let brokerid = 1; \r\n  \r\n  const [Clients, setClients] = useState([]);\r\n  const [Offers, setOffers] = useState([]);\r\n  const [BuyerRenter_Client, setBuyerRenter_Client] = useState([]);\r\n\r\n  const ClientCollectionRef = collection(db, \"Client\")\r\n  const OffersCollectionRef = collection(db, \"Offers\")\r\n  const BuyerRenterCollectionRef = collection(db, \"Buyer_Renter\")\r\n\r\n  const [records, setRecords] = useState([])\r\n  \r\n\r\n  const[getBrokerID_receiver, setBrokerID_receiver]= useState(0)\r\n  const[getBrokerID_transmitter, setBrokerID_transmitter]= useState(0)\r\n  const[getClientID, setClientID]= useState(0)\r\n  const[getOfferID, setOfferID]= useState(\"\")\r\n  const[getPrice, setPrice]= useState(\"\")\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n       \r\n    //App component will run once when it loads\r\n    const getClients = async ()=>{\r\n    onSnapshot(ClientCollectionRef, (snapshot)=> {\r\n     //snapshot.docs.maps returns all documents in our firebase\r\n     // doc.data return the data of each document (Field & variables associated with data)\r\n     setClients(snapshot.docs.map(doc=> doc.data()));\r\n     setRecords(snapshot.docs.map(doc=> doc.data()));\r\n    });\r\n  };\r\n    const getOffers = async () => {\r\n      onSnapshot(OffersCollectionRef, (snapshot)=> {\r\n        //snapshot.docs.maps returns all documents in our firebase\r\n        // doc.data return the data of each document (Field & variables associated with data)\r\n        setOffers(snapshot.docs.map(doc=> doc.data()));\r\n        setRecords(snapshot.docs.map(doc=> doc.data()));\r\n       });\r\n      \r\n  \r\n    };\r\n\r\n    const getBuyerRenter = async () => {\r\n      onSnapshot(BuyerRenterCollectionRef, (snapshot)=> {\r\n        //snapshot.docs.maps returns all documents in our firebase\r\n        // doc.data return the data of each document (Field & variables associated with data)\r\n        setBuyerRenter_Client(snapshot.docs.map(doc=> doc.data()));\r\n        setRecords(snapshot.docs.map(doc=> doc.data()));\r\n       });\r\n      \r\n  \r\n    };\r\n  \r\n  getClients();\r\n  getOffers();\r\n  getBuyerRenter();\r\n }, [])\r\n\r\n/*\r\nconst FilterClient(client)=>{\r\nsetRecords(Clients.filter((c)=>\r\n{if(c.BrokerID && brokerid)\r\n  return c.ClientName}\r\n))\r\n\r\n\r\n\r\n}*/\r\n\r\n\r\n\r\n\r\n\r\n  const createOffers = async()=>{\r\n   const newOfferDocRef = doc(OffersCollectionRef);\r\n   setOfferID(newOfferDocRef.id);\r\n   \r\n   \r\n    await addDoc(OffersCollectionRef,{\r\n      BrokerID_receiver: getBrokerID_receiver,\r\n      BrokerID_transmitter: getBrokerID_transmitter,\r\n      ClientID: getClientID,\r\n      OfferID:getOfferID,\r\n      OfferStatus:\"\",\r\n      Price:getPrice\r\n      \r\n      \r\n    });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\nconst ClientSelect=(event)=>{\r\n  setClientID(event.target.value)\r\n\r\n}\r\n\r\n\r\n  return (\r\n    <div className='bodyoffer'>\r\n      <div className='containtoffer'>\r\n     <div className='leftPart'>\r\n\r\n     </div>\r\n     \r\n     <div className='rightpart'>\r\n     <select className='selection' onChange={ClientSelect} >\r\n        <option  value = \"\" > Select a client </option>\r\n     {Clients.filter(client =>\r\n     client.BrokerID === brokerid).map((option)=> (\r\n     \r\n      <option value={option.ClientID}>{option.ClientName} </option>\r\n      ) )}\r\n      </select>\r\n     \r\n      <label className='labelUserEmail'>Your email <em>&#x2a;</em></label>\r\n      <input className='user_email' type=\"email\" placeholder=\"Email\"   \r\n       onChange={(event)=> {\r\n        setBrokerID_transmitter(event.target.value);\r\n    }} required />\r\n\r\n      <label className='labelUserEmail'>Other Broker email <em>&#x2a;</em></label>\r\n      <input className='otherEmail' type=\"email\" placeholder=\"Other Broker email\" name=\"user_email\" \r\n      onChange={(event)=> {\r\n        setBrokerID_receiver(event.target.value);\r\n    }} required />\r\n\r\n      <label className='labelPrice'>Price <em>&#x2a;</em></label>\r\n      <input className='inputPrice' type=\"price\" placeholder=\"Price\" name=\"user_email\" \r\n      onChange={(event)=> {\r\n        setPrice(event.target.value);\r\n    }} required />\r\n\r\n      <label className='labelComment'>Comment <em>&#x2a;</em></label>\r\n      <textarea className='textareaComment' name=\"message\" required=\"\" rows=\"4\" ></textarea>\r\n\r\n      <button className='SubmitButtonBroker' onClick={createOffers}>submit</button>\r\n     </div>\r\n     </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OfferForm\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}